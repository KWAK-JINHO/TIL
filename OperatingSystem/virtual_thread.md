# 가상 쓰레드(Virtual Thread)

JDK 21에서 도입된 가벼운 스레드 모델로, 기존 커널 쓰레드와 유저 쓰레드를 1:1 매핑하던 구조를 개선해 여러 가상 쓰레드(Virtual Thread)를 하나의 플랫폼
스레드(커널 스레드)에 할당해 실행.

## 특징

- **높은 동시성 처리**: 수천 개의 스레드를 효율적으로 관리 가능.
- **컨텍스트 스위칭 비용 감소**: 스레드를 마운트/언마운트해 비효율을 줄임.
- 기존 동기 코드 스타일을 유지하면서 비동기 I/O와 비슷한 효율 제공.

## 제약

**synchronized 블록**이나 **JNI 호출**을 사용하면 Virtual Thread가 플랫폼 스레드에 고정되어 효율성이 떨어짐.

## 스프링 에서의 가상쓰레드

- Spring Boot 3.2.x부터 공식 지원하지만 `synchronized`를 많이 사용하는 구조로 인해 효율이 떨어질 수 있음.
- 이를 해결하기 위해 `ReentrantLock` 사용으로 개선 중.

## 요약

Virtual Thread는 블로킹 I/O 모델에서도 높은 성능을 제공하며, 기존 WebFlux 같은 비동기 프레임워크의 단점을 보완할 수 있는 강력한 기능이고, Netty/WebFlux에 비해 코드 유지보수가 용이