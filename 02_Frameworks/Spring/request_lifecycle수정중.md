# 사용자 요청 처리 시 DTO를 통한 데이터 전달 과정

### 1. 역직렬화 실행 시점 (When)

- **Jackson의 역직렬화는 스프링 컨트롤러 메서드를 호출하기 직전에 실행됩니다.**
- 스프링 MVC의 **HandlerAdapter**가 컨트롤러 메서드의 `@RequestBody` 매개변수를 확인하고, 등록된 **HTTP 메시지 컨버터
  **를 통해 요청 본문의 JSON 데이터를 해당 DTO 타입의 객체로 변환하도록 Jackson에 지시합니다.
- **즉, 비즈니스 로직이 담긴 메서드가 실행되기 전에 이미 완전한 DTO 객체가 준비됩니다.**

### 2. 객체 생성 방식의 변화 (How)

Jackson은 DTO 객체를 생성하는 데 여러 전략을 사용하며, 이는 DTO의 설계 방식에 따라 달라집니다.

#### A. 전통적인 방식 (Jackson 2.x 이전 및 일반 POJO)

- **방식:** DTO 클래스에 **`no-argument constructor` (인수 없는 생성자)**가 존재하는 경우, Jackson은 이를 호출하여 **빈 객체**를 만듭니다.

- **데이터 주입:** 이후, JSON 데이터를 기반으로 **Setter 메서드**나 **리플렉션**을 사용하여 해당 객체의 필드에 값을 하나씩 주입하여 전달합니다.

#### B. 불변 객체 지원 방식 (Jackson 2.x 이후)

- Jackson은 불변 객체(Immutable Object) 설계를 지원하기 위해 `@JsonCreator`와 같은 어노테이션을 통해 **모든 필드를 인수로 받는 생성자
  **를 사용하는 기능을 강화했습니다. 이 방식은 `no-argument constructor`가 없어도 객체 생성이 가능합니다.

#### C. Java Record의 등장 (Java 16 및 Jackson 지원)

- **방식:** Java 16에서 **`record`**가 공식 도입된 이후, Jackson은 `record`를 특별히 지원합니다. 별도의 어노테이션(`@JsonCreator`) 없이도
  `record`가 자동으로 제공하는 **Canonical Constructor (모든 필드를 인수로 받는 생성자)**를 사용하여 객체를 생성하고 필드를 초기화합니다.
- **결과:** 이 방식은 **코드가 간결**하고 객체의 **불변성**을 보장하며 DTO를 전달하는 가장 현대적인 방법으로 권장됩니다.