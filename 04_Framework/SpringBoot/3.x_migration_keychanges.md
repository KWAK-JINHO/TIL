# Java 버전

Spring Boot 2.x 는 Java 8, 11 을 권장
Spring boot 3 부터 Java17 이상을 요구

# Jakarta EE 9 마이그레이션 ( javax.* -> jakarta.* )

엔터프라이즈 애플리케이션의 표준인 javax의 이름이 jakarta로 변경

# GraalVM 네이티브 이미지 지원

GraalVM은 고성능 다국어를 지원하는 차세대 JVM

기존 JVM의 흐름

- Java 코드 작성
- javac(Java Compiler)이 코드를 바이트코드(.class)로 변환 (Maven, Gradle과 같은 빌드 도구 실행하면 내부적으로 javac 멸령 실행)
- 빌드 tool이 컴파일된 바이트코드와 필요한 리소스를 하나로 묶어 .jar 또는 .war 로 만든다.
- Jar 파일을 실행하면 JVM이 구동되고 JVM은 바이트코드를 읽어 OS가 이해할 수 있는 기계어 코드로 변환하고 실행.

  GraalVM은 빌드 타임에 `./gradlew nativeCompile` 명령으로 네이티브 실행 파일을 생성(AOT 컴파일) 후 JVM없이 바로 실행이 가능.

현대의 MSA, 쿠버네티스 환경의 애플리케이션은 GraalVM이 유리하다.

# Observability 개선

## Micrometer의 @SpanTag를 지원

분산트레이싱을 위해서 사용.
예를 들어 요청으로 들어온 userID 또는 특정 주문번호를 @SpanTag로 지정하여 트레이싱 시스템에서 요청의 흐름을 빠르게 찾을 수 있다. -> 디버깅에 용이

## process InfoContributor 추가

Spring Boot Actuator가 제공하는 애플리케이션 정보로 앤드포인트에 프로세스 관련 상세 정보를 추가하는 기능
현재 실행중인 JVM 프로세스 자체의 정보를 포함시킬 수 있다.

제공되는 정보

- PID
- startTime
- path

운영환경에서 실행중인 특정 인스턴스를 식별하거나, 재시작 시간 등 운영에 필요한 정보를 얻을 수 있다.

# Spring Security 와 JWT 통합

JWT토큰을 Spring Security의 Authentication 객체로 변환하는 JwtAuthenticationConverter Bean 등록을 yml 파일에서 속성 설정으로 가능해짐.

이전 방식

```java

@Bean
public JwtAuthenticationConverter jwtAuthenticationConverter() {
    JwtGrantedAuthoritiesConverter grantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();
    grantedAuthoritiesConverter.setAuthorityPrefix("ROLE_");
    grantedAuthoritiesConverter.setAuthoritiesClaimName("roles");
    JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();
    jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(grantedAuthoritiesConverter);
    return jwtAuthenticationConverter;
}
```

3.3.0 이후

```yml
spring:
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: https://your-auth-server.com
          authority-prefix: "ROLE_" # 권한 prefix 설정
          authorities-claim-name: "roles" # JWT의 권한 claim 이름
          principal-claim-name: "sub" # principal로 사용할 claim
```

## Testcontainers & Docker Compose 통합 확장

테스트 및 로커 개발 환경 개선

- testcontainers: 테스트 코드 실행 시 필요한 외부 서비스를 Docker 컨테이너로 자동으로 띄우고, Spring 애플리케이션에 연결 정보(URL, 포트 등)를 주입하는 기능 강화
- docker-compose.yaml 파일을 프로젝트 루트에 두면, Spring Boot가 이를 인식하고 로컬 개발 시 자동으로 서비스를 시작/중지하는 기능이 도입